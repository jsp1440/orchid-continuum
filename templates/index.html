{% extends "base.html" %}

{% block content %}
<!-- Orchid of the Day - Above the Fold Hero -->
{% if orchid_of_day %}
<div class="orchid-of-day-hero py-4 mb-3" style="background: linear-gradient(135deg, #C5A3D0 0%, #7A4B8E 100%);">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="card bg-dark text-white border-0 shadow-lg">
                    <div class="row g-0">
                        <div class="col-md-6">
                            <div class="position-relative">
                                {% if orchid_of_day.google_drive_id %}
                                <img src="/api/drive-photo/{{ orchid_of_day.google_drive_id }}" 
                                     alt="Orchid of the Day - {{ orchid_of_day.display_name or orchid_of_day.scientific_name }}" 
                                     class="card-img"
                                     style="height: 300px; object-fit: cover; border-top-left-radius: .375rem; border-bottom-left-radius: .375rem;"
                                     onerror="this.onerror=null; this.src='/static/images/fcos_placeholder_rect.png'; this.alt='Orchid photo coming soon'; console.error('Orchid of Day failed to load:', '/api/drive-photo/{{ orchid_of_day.google_drive_id }}');"
                                     onload="console.log('âœ… Orchid of Day loaded successfully');">
                                {% elif orchid_of_day.image_url and orchid_of_day.image_url != '/static/images/orchid_placeholder.svg' %}
                                <img src="{{ orchid_of_day.image_url }}" 
                                     alt="Orchid of the Day - {{ orchid_of_day.display_name or orchid_of_day.scientific_name }}" 
                                     class="card-img"
                                     style="height: 300px; object-fit: cover; border-top-left-radius: .375rem; border-bottom-left-radius: .375rem;"
                                     onerror="this.src='/static/images/fcos_placeholder_rect.png'; this.alt='Orchid photo coming soon';">
                                {% else %}
                                <img src="/static/images/fcos_placeholder_rect.png" 
                                     alt="Orchid photo coming soon" 
                                     class="card-img"
                                     style="height: 300px; object-fit: cover; border-top-left-radius: .375rem; border-bottom-left-radius: .375rem;">
                                {% endif %}
                                <div class="position-absolute top-0 end-0 m-2">
                                    <span class="badge bg-warning text-dark fw-bold px-2 py-1">
                                        <i data-feather="star" style="width: 14px; height: 14px;" class="me-1"></i>
                                        Today
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <i data-feather="star" class="me-2 text-warning" style="width: 24px; height: 24px;"></i>
                                    <h5 class="text-warning mb-0">ORCHID OF THE DAY</h5>
                                </div>
                                <h4 class="card-title mb-3">
                                    {% if orchid_of_day_enhanced and orchid_of_day_enhanced.orchid.expanded_display_name %}
                                        {{ orchid_of_day_enhanced.orchid.expanded_display_name }}
                                    {% elif orchid_of_day.display_name %}
                                        {{ orchid_of_day.display_name }}
                                    {% else %}
                                        {{ orchid_of_day.scientific_name }}
                                    {% endif %}
                                </h4>
                                
                                <div class="row g-2 mb-3 small">
                                    {% if orchid_of_day.genus %}
                                    <div class="col-12">
                                        <i data-feather="tag" class="me-1 text-warning" style="width: 14px; height: 14px;"></i>
                                        <strong>Genus:</strong> {{ orchid_of_day.genus }}
                                    </div>
                                    {% endif %}
                                    {% if orchid_of_day.species %}
                                    <div class="col-12">
                                        <i data-feather="layers" class="me-1 text-warning" style="width: 14px; height: 14px;"></i>
                                        <strong>Species:</strong> {{ orchid_of_day.species }}
                                    </div>
                                    {% endif %}
                                    {% if orchid_of_day.region %}
                                    <div class="col-12">
                                        <i data-feather="map-pin" class="me-1 text-warning" style="width: 14px; height: 14px;"></i>
                                        <strong>Origin:</strong> {{ orchid_of_day.region.title() }}
                                    </div>
                                    {% endif %}
                                </div>
                                
                                <div class="d-grid">
                                    <a href="{{ url_for('orchid_detail', id=orchid_of_day.id) }}" class="btn btn-warning">
                                        <i data-feather="eye" class="me-2"></i>
                                        Learn More
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- Quick Links Row -->
<div class="container mb-4">
    <div class="row g-2">
        <div class="col-6 col-md-3">
            <a href="{{ url_for('gallery') }}" class="btn btn-outline-primary w-100 py-3">
                <i data-feather="grid" class="d-block mx-auto mb-1" style="width: 24px; height: 24px;"></i>
                <small>Browse Gallery</small>
            </a>
        </div>
        <div class="col-6 col-md-3">
            <a href="{{ url_for('search') }}" class="btn btn-outline-secondary w-100 py-3">
                <i data-feather="help-circle" class="d-block mx-auto mb-1" style="width: 24px; height: 24px;"></i>
                <small>Search Orchids</small>
            </a>
        </div>
        <div class="col-6 col-md-3">
            <a href="{{ url_for('upload') }}" class="btn btn-outline-success w-100 py-3">
                <i data-feather="upload" class="d-block mx-auto mb-1" style="width: 24px; height: 24px;"></i>
                <small>Upload Photo</small>
            </a>
        </div>
        <div class="col-6 col-md-3">
            <a href="{{ url_for('database_coverage_route') }}" class="btn btn-outline-info w-100 py-3">
                <i data-feather="database" class="d-block mx-auto mb-1" style="width: 24px; height: 24px;"></i>
                <small>Database Sources</small>
            </a>
        </div>
    </div>
</div>

<!-- Society Digital Tools - Compact -->
<div class="container mb-4">
    <div class="row">
        <div class="col-12 text-center mb-3">
            <h3 class="h4 text-light mb-2">Digital Tools & Resources</h3>
            <p class="text-muted small mb-0">Professional orchid analysis and community features</p>
        </div>
    </div>
    
    <div class="row g-3">
        <div class="col-md-4">
            <div class="card bg-dark text-light border-primary border-1">
                <div class="card-body text-center py-3">
                    <i data-feather="cpu" style="width: 32px; height: 32px; color: #0d6efd;" class="mb-2"></i>
                    <h6 class="card-title mb-1">AI Identification</h6>
                    <p class="card-text small text-muted mb-2">Instant species identification with 95%+ accuracy</p>
                    <span class="badge bg-primary">AI Powered</span>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-dark text-light border-success border-1">
                <div class="card-body text-center py-3">
                    <i data-feather="award" style="width: 32px; height: 32px; color: #198754;" class="mb-2"></i>
                    <h6 class="card-title mb-1">Judging Standards</h6>
                    <p class="card-text small text-muted mb-2">Official AOS, RHS evaluation criteria</p>
                    <span class="badge bg-success">Official</span>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-dark text-light border-warning border-1">
                <div class="card-body text-center py-3">
                    <i data-feather="globe" style="width: 32px; height: 32px; color: #ffc107;" class="mb-2"></i>
                    <h6 class="card-title mb-1">Global Database</h6>
                    <p class="card-text small text-muted mb-2">Multiple international orchid databases</p>
                    <span class="badge bg-warning text-dark">5+ Sources</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Compact Collection Statistics -->
<div class="container mb-4">
    <div class="row">
        <div class="col-12 text-center mb-3">
            <h3 class="h4 text-light">Collection Overview</h3>
            <p class="text-muted small mb-0">Five Cities Orchid Society Database</p>
        </div>
    </div>
    
    <!-- Main Statistics Row - Compact -->
    <div class="row text-center mb-3">
        <div class="col-6 col-md-3 mb-2">
            <div class="card bg-dark text-light border-primary border-1 py-2">
                <div class="card-body p-2">
                    <i data-feather="database" class="text-primary mb-1" style="width: 20px; height: 20px;"></i>
                    <div class="h5 text-primary mb-0">{{ stats.total_orchids or '5,516' }}</div>
                    <small class="text-muted">Records</small>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 mb-2">
            <div class="card bg-dark text-light border-success border-1 py-2">
                <div class="card-body p-2">
                    <i data-feather="image" class="text-success mb-1" style="width: 20px; height: 20px;"></i>
                    <div class="h5 text-success mb-0">{{ stats.photos_available or '2,472' }}</div>
                    <small class="text-muted">Photos</small>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 mb-2">
            <div class="card bg-dark text-light border-info border-1 py-2">
                <div class="card-body p-2">
                    <i data-feather="layers" class="text-info mb-1" style="width: 20px; height: 20px;"></i>
                    <div class="h5 text-info mb-0">{{ stats.total_genera or '396' }}</div>
                    <small class="text-muted">Genera</small>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3 mb-2">
            <div class="card bg-dark text-light border-warning border-1 py-2">
                <div class="card-body p-2">
                    <i data-feather="tag" class="text-warning mb-1" style="width: 20px; height: 20px;"></i>
                    <div class="h5 text-warning mb-0">{{ stats.total_species or '2,053' }}</div>
                    <small class="text-muted">Species</small>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Expandable Top Genera Section -->
    {% if stats.genus_breakdown %}
    <div class="row">
        <div class="col-12">
            <div class="text-center">
                <button class="btn btn-outline-secondary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#topGeneraCollapse" aria-expanded="false">
                    <i data-feather="bar-chart-2" class="me-1" style="width: 16px; height: 16px;"></i>
                    View Top Genera <i data-feather="chevron-down" class="ms-1" style="width: 16px; height: 16px;"></i>
                </button>
            </div>
            
            <div class="collapse mt-3" id="topGeneraCollapse">
                <div class="card bg-dark text-light border-0">
                    <div class="card-body p-3">
                        <div class="row g-2">
                            {% for genus_stat in stats.genus_breakdown[:8] %}
                            <div class="col-lg-3 col-md-4 col-sm-6">
                                <div class="d-flex justify-content-between align-items-center p-2 bg-secondary rounded small">
                                    <div>
                                        <strong class="text-warning">{{ genus_stat.genus }}</strong><br>
                                        <small class="text-muted">{{ genus_stat.species_count }} species</small>
                                    </div>
                                    <div class="text-end">
                                        <div class="small text-primary">{{ genus_stat.total_records }}</div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <div class="text-center mt-2">
                            <a href="/stats" class="btn btn-outline-primary btn-sm me-2">
                                <i data-feather="trending-up" class="me-1" style="width: 14px; height: 14px;"></i>Detailed Stats
                            </a>
                            <a href="/phenotype-analysis" class="btn btn-outline-success btn-sm">
                                <i data-feather="activity" class="me-1" style="width: 14px; height: 14px;"></i>Analysis
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Recent Additions - Horizontal Carousel -->
{% if recent_orchids %}
<div class="container mb-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="h4 mb-0 text-light">
            <i data-feather="clock" class="me-2"></i>Recent Additions
        </h3>
        <a href="{{ url_for('gallery') }}" class="btn btn-outline-secondary btn-sm">
            View All <i data-feather="arrow-right" class="ms-1"></i>
        </a>
    </div>
    
    <div class="position-relative">
        <div class="d-flex overflow-auto pb-2" style="scroll-behavior: smooth; scrollbar-width: thin;">
            {% for orchid in recent_orchids %}
            <div class="flex-shrink-0 me-3" style="width: 160px;">
                <div class="card bg-dark text-light border-0 shadow-sm h-100">
                    {% if orchid.google_drive_id %}
                        <img src="/api/drive-photo/{{ orchid.google_drive_id }}" 
                             class="card-img-top" 
                             alt="{{ orchid.display_name }}"
                             style="height: 120px; object-fit: cover;"
                             onerror="this.onerror=null; this.src='/static/images/fcos_placeholder_square.png'; this.alt='Orchid photo coming soon'; console.error('Recent orchid failed:', '{{ orchid.display_name }}');"
                             onload="console.log('âœ… Recent orchid loaded:', '{{ orchid.display_name }}');">
                    {% elif orchid.image_url and orchid.image_url != '/static/images/orchid_placeholder.svg' %}
                        <img src="/api/proxy-image?url={{ orchid.image_url|urlencode }}" 
                             class="card-img-top" 
                             alt="{{ orchid.display_name }}"
                             style="height: 120px; width: 100%; object-fit: cover; display: block !important; opacity: 1 !important; visibility: visible !important;"
                             onerror="console.error('âŒ PROXY IMAGE FAILED:', '{{ orchid.image_url }}', 'for orchid:', '{{ orchid.display_name }}'); this.src='/static/images/fcos_placeholder_square.png'; this.alt='Orchid photo coming soon';"
                             onload="console.log('âœ… PROXY IMAGE SUCCESS:', '{{ orchid.display_name }}', 'Size:', this.naturalWidth + 'x' + this.naturalHeight);">
                    {% else %}
                        <img src="/static/images/fcos_placeholder_square.png" 
                             class="card-img-top" 
                             alt="Orchid photo coming soon"
                             style="height: 120px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body p-2">
                        <h6 class="card-title small mb-1 text-truncate">{{ orchid.display_name or orchid.scientific_name }}</h6>
                        {% if orchid.genus %}
                            <p class="text-muted small mb-2 text-truncate">{{ orchid.genus }}</p>
                        {% endif %}
                        <a href="{{ url_for('orchid_detail', id=orchid.id) }}" class="btn btn-xs btn-outline-primary btn-sm w-100">View</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- Featured Orchids - Horizontal Carousel -->
{% if featured_orchids %}
<div class="container mb-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="h4 mb-0 text-light">
            <i data-feather="award" class="me-2 text-warning"></i>Featured Orchids
            <span class="badge bg-warning text-dark ms-2">FCOS Highlights</span>
        </h3>
    </div>
    
    <div class="position-relative">
        <div class="d-flex overflow-auto pb-2" style="scroll-behavior: smooth; scrollbar-width: thin;">
            {% for orchid in featured_orchids %}
            <div class="flex-shrink-0 me-3" style="width: 200px;">
                <div class="card bg-dark text-light border-warning border-2 shadow-sm h-100">
                    <div class="position-relative">
                        {% if orchid.google_drive_id %}
                            <img src="/api/drive-photo/{{ orchid.google_drive_id }}" 
                                 class="card-img-top" 
                                 alt="{{ orchid.display_name }}"
                                 style="height: 140px; object-fit: cover;"
                                 onerror="this.onerror=null; this.src='/static/images/fcos_placeholder_rect.png'; this.alt='Orchid photo coming soon'; console.error('Featured orchid failed:', '{{ orchid.display_name }}');"
                                 onload="console.log('âœ… Featured orchid loaded:', '{{ orchid.display_name }}');">
                        {% elif orchid.image_url and orchid.image_url != '/static/images/orchid_placeholder.svg' %}
                            <img src="{{ orchid.image_url }}" 
                                 class="card-img-top" 
                                 alt="{{ orchid.display_name }}"
                                 style="height: 140px; object-fit: cover;"
                                 onerror="this.src='/static/images/fcos_placeholder_rect.png'; this.alt='Orchid photo coming soon';">
                        {% else %}
                            <img src="/static/images/fcos_placeholder_rect.png" 
                                 class="card-img-top" 
                                 alt="Orchid photo coming soon"
                                 style="height: 140px; object-fit: cover;">
                        {% endif %}
                        <div class="position-absolute top-0 end-0 m-1">
                            <i data-feather="star" class="text-warning" style="width: 16px; height: 16px;"></i>
                        </div>
                    </div>
                    <div class="card-body p-2">
                        <h6 class="card-title small mb-1 text-truncate text-warning">{{ orchid.display_name or orchid.scientific_name }}</h6>
                        {% if orchid.scientific_name and orchid.display_name %}
                            <p class="text-muted small fst-italic mb-2 text-truncate">{{ orchid.scientific_name }}</p>
                        {% endif %}
                        <a href="{{ url_for('orchid_detail', id=orchid.id) }}" class="btn btn-xs btn-warning btn-sm w-100">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- Call to Action Section -->
<div class="bg-gradient py-5 mb-5" style="background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="text-white mb-3">Ready to Discover Your Orchids?</h2>
                <p class="text-white-50 mb-0">
                    Join thousands of orchid enthusiasts using AI-powered identification and analysis. 
                    Get instant results, professional judging scores, and contribute to the world's largest orchid database.
                </p>
            </div>
            <div class="col-lg-4 text-end">
                {% if not current_user.is_authenticated %}
                <a href="{{ url_for('register') }}" class="btn btn-light btn-lg me-2">
                    <i data-feather="user-plus" class="me-2"></i>Join Free
                </a>
                <a href="{{ url_for('how_it_works') }}" class="btn btn-outline-light btn-lg">
                    <i data-feather="help-circle" class="me-2"></i>Learn How
                </a>
                {% else %}
                <a href="{{ url_for('upload') }}" class="btn btn-light btn-lg">
                    <i data-feather="upload" class="me-2"></i>Upload Orchid Now
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Quick Links -->
<div class="container">
    <div class="row text-center">
        <div class="col-md-3">
            <div class="card bg-dark text-light mb-3">
                <div class="card-body">
                    <i data-feather="search" class="mb-2 text-primary" style="width: 32px; height: 32px;"></i>
                    <h6>Browse Gallery</h6>
                    <a href="{{ url_for('gallery') }}" class="btn btn-outline-primary btn-sm">Explore</a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-dark text-light mb-3">
                <div class="card-body">
                    <i data-feather="info" class="mb-2 text-success" style="width: 32px; height: 32px;"></i>
                    <h6>How It Works</h6>
                    <a href="{{ url_for('how_it_works') }}" class="btn btn-outline-success btn-sm">Learn</a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-dark text-light mb-3">
                <div class="card-body">
                    <i data-feather="award" class="mb-2 text-warning" style="width: 32px; height: 32px;"></i>
                    <h6>Judging Standards</h6>
                    <a href="{{ url_for('gallery') }}" class="btn btn-outline-warning btn-sm">View Gallery</a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-dark text-light mb-3">
                <div class="card-body">
                    <i data-feather="database" class="mb-2 text-info" style="width: 32px; height: 32px;"></i>
                    <h6>Database Sources</h6>
                    <a href="{{ url_for('database_coverage_route') }}" class="btn btn-outline-info btn-sm">Details</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- FCOS Integration Footer -->
<div class="container-fluid bg-dark py-4 mt-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="d-flex align-items-center">
                    <img src="/static/images/five_cities_orchid_society_logo.png" 
                         alt="Five Cities Orchid Society" 
                         style="height: 40px; width: auto;" 
                         class="me-3"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
                    <i data-feather="star" class="me-3 text-warning" style="display: none; width: 24px; height: 24px;"></i>
                    <div>
                        <h6 class="mb-0 text-light">Five Cities Orchid Society</h6>
                        <small class="text-muted">A Digital Resource of the Five Cities Orchid Society</small>
                    </div>
                </div>
            </div>
            <div class="col-md-6 text-md-end">
                <div class="d-flex flex-wrap justify-content-md-end gap-3 mb-2">
                    <a href="/culture/demo" class="btn btn-outline-secondary btn-sm">
                        <i data-feather="book-open" class="me-1" style="width: 14px; height: 14px;"></i>Culture Sheets
                    </a>
                    <a href="{{ url_for('upload') }}" class="btn btn-outline-primary btn-sm">
                        <i data-feather="upload" class="me-1" style="width: 14px; height: 14px;"></i>Upload Photo
                    </a>
                    <a href="{{ url_for('gallery') }}" class="btn btn-outline-success btn-sm">
                        <i data-feather="grid" class="me-1" style="width: 14px; height: 14px;"></i>Browse Gallery
                    </a>
                </div>
                <div>
                    <small class="text-muted">
                        Serving Central Coast orchid enthusiasts since 1979
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

<script>
// Auto-updating statistics counters
function updateStatistics() {
    fetch('/api/live-stats')
        .then(response => response.json())
        .then(data => {
            // Update main statistics
            if (data.total_orchids) {
                const totalElement = document.querySelector('h3.text-primary');
                if (totalElement) {
                    const currentValue = parseInt(totalElement.textContent.replace(/,/g, ''));
                    const newValue = data.total_orchids;
                    if (newValue !== currentValue) {
                        animateCounter(totalElement, currentValue, newValue);
                    }
                }
            }
            
            if (data.photos_available) {
                const photosElement = document.querySelector('h3.text-warning');
                if (photosElement) {
                    const currentValue = parseInt(photosElement.textContent.replace(/,/g, ''));
                    const newValue = data.photos_available;
                    if (newValue !== currentValue) {
                        animateCounter(photosElement, currentValue, newValue);
                    }
                }
            }
            
            if (data.total_genera) {
                const generaElement = document.querySelector('h3.text-success');
                if (generaElement) {
                    const currentValue = parseInt(generaElement.textContent.replace(/,/g, ''));
                    const newValue = data.total_genera;
                    if (newValue !== currentValue) {
                        animateCounter(generaElement, currentValue, newValue);
                    }
                }
            }
            
            if (data.total_species) {
                const speciesElement = document.querySelector('h3.text-info');
                if (speciesElement) {
                    const currentValue = parseInt(speciesElement.textContent.replace(/,/g, ''));
                    const newValue = data.total_species;
                    if (newValue !== currentValue) {
                        animateCounter(speciesElement, currentValue, newValue);
                    }
                }
            }
            
            // Add last updated indicator
            if (data.last_updated) {
                let updateIndicator = document.getElementById('stats-update-indicator');
                if (!updateIndicator) {
                    updateIndicator = document.createElement('small');
                    updateIndicator.id = 'stats-update-indicator';
                    updateIndicator.className = 'text-muted d-block mt-2';
                    updateIndicator.style.textAlign = 'center';
                    
                    const statsSection = document.querySelector('.container .row .col-12.text-center');
                    if (statsSection) {
                        statsSection.appendChild(updateIndicator);
                    }
                }
                updateIndicator.innerHTML = `<i data-feather="clock" style="width: 12px; height: 12px;"></i> Last updated: ${data.last_updated}`;
                
                // Re-initialize feather icons for new clock icon
                if (typeof feather !== 'undefined') {
                    feather.replace();
                }
            }
            
            console.log('ðŸ“Š Statistics updated:', data.last_updated);
        })
        .catch(error => {
            console.warn('Statistics update failed:', error);
        });
}

// Animate counter changes with smooth counting
function animateCounter(element, start, end) {
    const duration = 1000; // 1 second
    const startTime = performance.now();
    
    function updateCount(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Easing function for smooth animation
        const easeOut = 1 - Math.pow(1 - progress, 3);
        const currentValue = Math.round(start + (end - start) * easeOut);
        
        element.textContent = currentValue.toLocaleString();
        
        if (progress < 1) {
            requestAnimationFrame(updateCount);
        }
    }
    
    requestAnimationFrame(updateCount);
}

// Initialize auto-updating
document.addEventListener('DOMContentLoaded', function() {
    // Update immediately on page load
    setTimeout(updateStatistics, 2000);
    
    // Update every 30 seconds
    setInterval(updateStatistics, 30000);
    
    console.log('ðŸš€ Auto-updating statistics initialized - updates every 30 seconds');
});
</script>
