<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gary Yong Gee - Simple Photo Sharing</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    
    <style>
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f4c75);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        }
        
        .upload-container {
            max-width: 800px;
            margin: 2rem auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 3rem;
        }
        
        .step-card {
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.3);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00d4aa, #6B3FA0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .upload-zone {
            border: 2px dashed rgba(0, 212, 170, 0.5);
            border-radius: 10px;
            padding: 3rem;
            text-align: center;
            background: rgba(0, 212, 170, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-zone:hover {
            border-color: #00d4aa;
            background: rgba(0, 212, 170, 0.1);
        }
        
        .upload-zone.dragover {
            border-color: #00d4aa;
            background: rgba(0, 212, 170, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #00d4aa, #6B3FA0);
            border: none;
            padding: 0.75rem 2rem;
            font-weight: 600;
        }
        
        .contact-info {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .photo-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1;
        }
        
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-photo {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(220, 53, 69, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            font-size: 12px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="upload-container">
            <div class="text-center mb-4">
                <h1 class="mb-3">
                    <i data-feather="camera" class="me-2"></i>
                    Gary Yong Gee Photo Sharing
                </h1>
                <p class="lead">Simple, secure way to share your orchid photos and information</p>
            </div>

            <!-- Step 1: Simple Upload -->
            <div class="step-card">
                <div class="step-number">1</div>
                <h3>Upload Your Photos</h3>
                <p class="mb-4">Just drag and drop your orchid photos here, or click to select files</p>
                
                <div class="upload-zone" id="uploadZone">
                    <i data-feather="upload-cloud" style="width: 48px; height: 48px;" class="mb-3"></i>
                    <p class="mb-2"><strong>Drag photos here or click to browse</strong></p>
                    <p class="text-muted small">Supports JPG, PNG, HEIC • Any number of photos • No size limits</p>
                    <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                </div>
                
                <div id="photoGrid" class="photo-grid"></div>
            </div>

            <!-- Step 2: Add Information -->
            <div class="step-card">
                <div class="step-number">2</div>
                <h3>Add Information (Optional)</h3>
                <form id="photoForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Orchid Name/Species</label>
                            <input type="text" class="form-control" name="species" placeholder="e.g., Dendrobium nobile">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Location/Country</label>
                            <input type="text" class="form-control" name="location" placeholder="e.g., Thailand, Indonesia">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Growing Conditions</label>
                        <textarea class="form-control" name="conditions" rows="3" placeholder="Temperature, humidity, light conditions, flowering time, etc."></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Additional Notes</label>
                        <textarea class="form-control" name="notes" rows="3" placeholder="Any other information about these orchids..."></textarea>
                    </div>
                </form>
            </div>

            <!-- Step 3: Send -->
            <div class="step-card">
                <div class="step-number">3</div>
                <h3>Send to Orchid Continuum</h3>
                <p class="mb-4">Your photos and information will be sent securely to our research team</p>
                
                <button type="button" class="btn btn-primary btn-lg" id="sendButton" disabled>
                    <i data-feather="send" class="me-2"></i>
                    Send Photos & Information
                </button>
                
                <div id="uploadProgress" class="mt-3" style="display: none;">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                             role="progressbar" style="width: 0%"></div>
                    </div>
                    <p class="text-center mt-2">Uploading your photos...</p>
                </div>
                
                <div id="successMessage" class="alert alert-success mt-3" style="display: none;">
                    <i data-feather="check-circle" class="me-2"></i>
                    <strong>Success!</strong> Your photos have been sent to our research team. 
                    We'll contact you soon about including them in The Orchid Continuum.
                </div>
            </div>

            <!-- Alternative Contact -->
            <div class="contact-info">
                <h4><i data-feather="mail" class="me-2"></i>Alternative Ways to Share</h4>
                <div class="row">
                    <div class="col-md-6">
                        <h6>Email Photos Directly</h6>
                        <p><strong>Email:</strong> <a href="mailto:research@orchidcontinuum.com">research@orchidcontinuum.com</a></p>
                        <p class="small">Attach photos and include any information about species, location, growing conditions</p>
                    </div>
                    <div class="col-md-6">
                        <h6>API Integration (For Developers)</h6>
                        <p><strong>API Key:</strong> <code>gary_orchid_continuum_2025</code></p>
                        <p><strong>Bulk Upload Endpoint:</strong> <code>/api/gary-bulk-upload</code></p>
                        <p class="small">For automated uploads from your systems - include API key in headers</p>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <h6>Share via Google Drive/Dropbox</h6>
                        <p><strong>Large Collections:</strong> Share folder link via email</p>
                        <p class="small">Perfect for large photo collections - just organize by species/location</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Example Python Script</h6>
                        <pre class="small"><code>import requests
files = {'photo_0': open('orchid1.jpg', 'rb')}
headers = {'X-API-Key': 'gary_orchid_continuum_2025'}
r = requests.post('/api/gary-bulk-upload', 
                 files=files, headers=headers)</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        feather.replace();
        
        let selectedFiles = [];
        
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const photoGrid = document.getElementById('photoGrid');
        const sendButton = document.getElementById('sendButton');
        const uploadProgress = document.getElementById('uploadProgress');
        const successMessage = document.getElementById('successMessage');
        
        // Click to browse files
        uploadZone.addEventListener('click', () => fileInput.click());
        
        // File input change
        fileInput.addEventListener('change', handleFiles);
        
        // Drag and drop
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });
        
        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });
        
        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            handleFiles({ target: { files: e.dataTransfer.files } });
        });
        
        function handleFiles(event) {
            const files = Array.from(event.target.files);
            
            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    selectedFiles.push(file);
                    displayPhoto(file);
                }
            });
            
            updateSendButton();
        }
        
        function displayPhoto(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const photoDiv = document.createElement('div');
                photoDiv.className = 'photo-preview';
                photoDiv.innerHTML = `
                    <img src="${e.target.result}" alt="Orchid photo">
                    <button type="button" class="remove-photo" onclick="removePhoto(this, '${file.name}')">×</button>
                `;
                photoGrid.appendChild(photoDiv);
            };
            reader.readAsDataURL(file);
        }
        
        function removePhoto(button, fileName) {
            selectedFiles = selectedFiles.filter(file => file.name !== fileName);
            button.parentElement.remove();
            updateSendButton();
        }
        
        function updateSendButton() {
            sendButton.disabled = selectedFiles.length === 0;
        }
        
        // Send button click
        sendButton.addEventListener('click', async () => {
            if (selectedFiles.length === 0) return;
            
            const formData = new FormData();
            const form = document.getElementById('photoForm');
            
            // Add photos
            selectedFiles.forEach((file, index) => {
                formData.append(`photo_${index}`, file);
            });
            
            // Add form data
            const formInputs = form.querySelectorAll('input, textarea');
            formInputs.forEach(input => {
                if (input.value.trim()) {
                    formData.append(input.name, input.value);
                }
            });
            
            // Show progress
            uploadProgress.style.display = 'block';
            sendButton.disabled = true;
            
            try {
                // Simulate upload progress
                const progressBar = uploadProgress.querySelector('.progress-bar');
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 20;
                    if (progress > 90) progress = 90;
                    progressBar.style.width = progress + '%';
                }, 500);
                
                // Make request to upload endpoint
                const response = await fetch('/api/gary-upload', {
                    method: 'POST',
                    body: formData
                });
                
                clearInterval(interval);
                progressBar.style.width = '100%';
                
                if (response.ok) {
                    setTimeout(() => {
                        uploadProgress.style.display = 'none';
                        successMessage.style.display = 'block';
                        
                        // Reset form
                        selectedFiles = [];
                        photoGrid.innerHTML = '';
                        form.reset();
                        updateSendButton();
                        
                        feather.replace();
                    }, 1000);
                } else {
                    throw new Error('Upload failed');
                }
            } catch (error) {
                alert('Upload failed. Please try emailing the photos directly to research@orchidcontinuum.com');
                uploadProgress.style.display = 'none';
                sendButton.disabled = false;
            }
        });
    </script>
</body>
</html>